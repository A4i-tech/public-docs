
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://a4i-tech.github.io/public-docs/architecture/llm-gateway-layer/">
      
      
        <link rel="prev" href="../agentic-governance-safety-framework/">
      
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>LLM Gateway Layer - A4i Tech Public Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#llm-gateway-layer-cross-cutting-infrastructure-for-ai-governance" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="A4i Tech Public Docs" class="md-header__button md-logo" aria-label="A4i Tech Public Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            A4i Tech Public Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              LLM Gateway Layer
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="A4i Tech Public Docs" class="md-nav__button md-logo" aria-label="A4i Tech Public Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    A4i Tech Public Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" checked>
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Architecture
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Inclusive-Architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Inclusive Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../universal-knowledge-ingestion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Universal Knowledge Ingestion Framework
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../agentic-governance-safety-framework/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Agentic Governance & Safety Framework
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    LLM Gateway Layer
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    LLM Gateway Layer
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#executive-summary" class="md-nav__link">
    <span class="md-ellipsis">
      
        Executive Summary
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#document-navigation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Document Navigation
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#problem-statement" class="md-nav__link">
    <span class="md-ellipsis">
      
        Problem Statement
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Problem Statement">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#current-challenges-across-products" class="md-nav__link">
    <span class="md-ellipsis">
      
        Current Challenges Across Products
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cross-cutting-concerns-requiring-gateway-solution" class="md-nav__link">
    <span class="md-ellipsis">
      
        Cross-Cutting Concerns Requiring Gateway Solution
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#build-vs-buy-analysis" class="md-nav__link">
    <span class="md-ellipsis">
      
        Build vs Buy Analysis
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Build vs Buy Analysis">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#option-a-build-custom-gateway" class="md-nav__link">
    <span class="md-ellipsis">
      
        Option A: Build ‚Äî Custom Gateway
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#option-b-buy-llm-gateway-solutions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Option B: Buy ‚Äî LLM Gateway Solutions
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Option B: Buy ‚Äî LLM Gateway Solutions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#feature-comparison" class="md-nav__link">
    <span class="md-ellipsis">
      
        Feature Comparison
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when-to-choose-each" class="md-nav__link">
    <span class="md-ellipsis">
      
        When to Choose Each
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verdict" class="md-nav__link">
    <span class="md-ellipsis">
      
        Verdict
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#detailed-litellm-evaluation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Detailed LiteLLM Evaluation
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Detailed LiteLLM Evaluation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#provider-support-matrix" class="md-nav__link">
    <span class="md-ellipsis">
      
        Provider Support Matrix
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#built-in-governance-features" class="md-nav__link">
    <span class="md-ellipsis">
      
        Built-in Governance Features
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Built-in Governance Features">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-cost-tracking-budget-management" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Cost Tracking &amp; Budget Management ‚úÖ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-guardrails-content-safety" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Guardrails &amp; Content Safety ‚úÖ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-authentication-access-control" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Authentication &amp; Access Control ‚úÖ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-audit-logging-observability" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Audit Logging &amp; Observability ‚úÖ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-fallback-reliability" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Fallback &amp; Reliability ‚úÖ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-rate-limiting" class="md-nav__link">
    <span class="md-ellipsis">
      
        6. Rate Limiting ‚úÖ
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enterprise-features-optional" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enterprise Features (Optional)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recommended-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        Recommended Architecture
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Recommended Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#integration-with-agentic-governance-safety-framework" class="md-nav__link">
    <span class="md-ellipsis">
      
        Integration with Agentic Governance &amp; Safety Framework
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deployment-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        Deployment Architecture
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-for-multi-tenant-governance" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuration for Multi-Tenant Governance
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#integration-with-governance-framework" class="md-nav__link">
    <span class="md-ellipsis">
      
        Integration with Governance Framework
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Migration Strategy
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Migration Strategy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#phase-1-infrastructure-setup" class="md-nav__link">
    <span class="md-ellipsis">
      
        Phase 1: Infrastructure Setup
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-2-byoeb-migration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Phase 2: BYOEB Migration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-3-shiksha-copilot-migration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Phase 3: Shiksha Copilot Migration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-4-advanced-features" class="md-nav__link">
    <span class="md-ellipsis">
      
        Phase 4: Advanced Features
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#benefits-summary" class="md-nav__link">
    <span class="md-ellipsis">
      
        Benefits Summary
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Benefits Summary">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#immediate-benefits" class="md-nav__link">
    <span class="md-ellipsis">
      
        Immediate Benefits
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#long-term-strategic-benefits" class="md-nav__link">
    <span class="md-ellipsis">
      
        Long-term Strategic Benefits
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#references" class="md-nav__link">
    <span class="md-ellipsis">
      
        References
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="llm-gateway-layer-cross-cutting-infrastructure-for-ai-governance">LLM Gateway Layer: Cross-Cutting Infrastructure for AI Governance<a class="headerlink" href="#llm-gateway-layer-cross-cutting-infrastructure-for-ai-governance" title="Permanent link">&para;</a></h1>
<h2 id="executive-summary">Executive Summary<a class="headerlink" href="#executive-summary" title="Permanent link">&para;</a></h2>
<p>The <strong>LLM Gateway Layer</strong> is a foundational infrastructure component within the Agentic Governance &amp; Safety Framework that provides unified, abstracted access to multiple Large Language Model (LLM) providers. This layer solves critical cross-cutting concerns around provider flexibility, cost optimization, failover resilience, and operational governance‚Äîenabling organizations to swap, scale, and govern AI providers without application-level changes.</p>
<p>This document evaluates the <strong>Build vs Buy</strong> decision, compares leading solutions (<strong>OpenRouter vs LiteLLM</strong>), and provides a recommended architecture integrating LiteLLM as the gateway layer within the Inclusive Architecture.</p>
<h2 id="document-navigation">Document Navigation<a class="headerlink" href="#document-navigation" title="Permanent link">&para;</a></h2>
<ul>
<li><strong>Understanding Governance?</strong> See <a href="../agentic-governance-safety-framework/">Agentic Governance &amp; Safety Framework</a> for domain-specific compliance</li>
<li><strong>Understanding integration?</strong> See <a href="#integration-with-governance-framework">Integration with Governance Framework</a> (this document)</li>
<li><strong>Understanding responsibilities?</strong> See <a href="../agentic-governance-safety-framework/#what-the-gateway-provides-vs-what-governance-adds">What Gateway Provides vs What Governance Adds</a></li>
<li><strong>Implementing Governance?</strong> See <a href="../agentic-governance-safety-framework/#engine-layer">Governance Framework Engine Layer</a></li>
</ul>
<hr />
<h2 id="problem-statement">Problem Statement<a class="headerlink" href="#problem-statement" title="Permanent link">&para;</a></h2>
<h3 id="current-challenges-across-products">Current Challenges Across Products<a class="headerlink" href="#current-challenges-across-products" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Product</th>
<th>Current LLM Integration</th>
<th>Pain Points</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>BYOEB</strong></td>
<td>Direct Azure OpenAI SDK</td>
<td>Vendor lock-in, no fallback, manual cost tracking</td>
</tr>
<tr>
<td><strong>Shiksha Copilot</strong></td>
<td>Azure OpenAI + Azure AI Projects</td>
<td>Mixed SDK patterns, inconsistent token tracking</td>
</tr>
<tr>
<td><strong>SEEDS</strong></td>
<td>No active LLM (planned)</td>
<td>Need flexible foundation for future AI features</td>
</tr>
</tbody>
</table>
<h3 id="cross-cutting-concerns-requiring-gateway-solution">Cross-Cutting Concerns Requiring Gateway Solution<a class="headerlink" href="#cross-cutting-concerns-requiring-gateway-solution" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Provider Lock-In</strong>: Direct SDK integrations create tight coupling to specific providers</li>
<li><strong>No Fallback Strategy</strong>: Service disruptions affect availability without automatic failover</li>
<li><strong>Manual Cost Tracking</strong>: Token counting requires custom implementation per provider</li>
<li><strong>Inconsistent API Patterns</strong>: Different SDKs require different code paths for same operations</li>
<li><strong>Limited Model Selection</strong>: Inability to leverage best-in-class models from different providers</li>
<li><strong>Compliance Gaps</strong>: No unified layer for governance policies across all LLM calls</li>
</ol>
<hr />
<h2 id="build-vs-buy-analysis">Build vs Buy Analysis<a class="headerlink" href="#build-vs-buy-analysis" title="Permanent link">&para;</a></h2>
<h3 id="option-a-build-custom-gateway">Option A: Build ‚Äî Custom Gateway<a class="headerlink" href="#option-a-build-custom-gateway" title="Permanent link">&para;</a></h3>
<p><strong>Approach</strong>: Develop internal abstraction layer over multiple LLM provider SDKs.</p>
<table>
<thead>
<tr>
<th>Aspect</th>
<th>Assessment</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Development Effort</strong></td>
<td>3-6 months for MVP, ongoing maintenance</td>
</tr>
<tr>
<td><strong>Provider Coverage</strong></td>
<td>Limited to prioritized providers</td>
</tr>
<tr>
<td><strong>Feature Parity</strong></td>
<td>Continuous catch-up with provider updates</td>
</tr>
<tr>
<td><strong>Cost Tracking</strong></td>
<td>Requires manual pricing table maintenance</td>
</tr>
<tr>
<td><strong>Failover Logic</strong></td>
<td>Custom implementation needed</td>
</tr>
<tr>
<td><strong>Maintenance Burden</strong></td>
<td>High ‚Äî API changes, new models, pricing updates</td>
</tr>
</tbody>
</table>
<p><strong>Hidden Costs</strong>:
- Continuous SDK version updates
- Pricing table maintenance (changes monthly)
- New model support delays
- Security patching across multiple SDKs
- Documentation and onboarding</p>
<p><strong>Verdict</strong>: ‚ùå <strong>Not Recommended</strong> ‚Äî High ongoing cost, diverts resources from core product development.</p>
<hr />
<h3 id="option-b-buy-llm-gateway-solutions">Option B: Buy ‚Äî LLM Gateway Solutions<a class="headerlink" href="#option-b-buy-llm-gateway-solutions" title="Permanent link">&para;</a></h3>
<p>Two mature gateway solutions exist that provide unified LLM access: <strong>OpenRouter</strong> (managed SaaS) and <strong>LiteLLM</strong> (self-hosted open source).</p>
<h4 id="feature-comparison">Feature Comparison<a class="headerlink" href="#feature-comparison" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Capability</th>
<th>OpenRouter</th>
<th>LiteLLM</th>
<th>Winner</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Deployment Model</strong></td>
<td>‚òÅÔ∏è Managed SaaS</td>
<td>üè† Self-hosted (Docker/K8s)</td>
<td><em>Depends on needs</em></td>
</tr>
<tr>
<td><strong>Integration</strong></td>
<td>OpenAI-compatible API</td>
<td>OpenAI-compatible API</td>
<td>ü§ù Tie</td>
</tr>
<tr>
<td><strong>Provider Coverage</strong></td>
<td>100+ models</td>
<td>100+ providers</td>
<td>ü§ù Tie</td>
</tr>
<tr>
<td><strong>BYOK Support</strong></td>
<td>‚úÖ Yes</td>
<td>‚úÖ Yes</td>
<td>ü§ù Tie</td>
</tr>
<tr>
<td><strong>Cost Tracking</strong></td>
<td>Dashboard only</td>
<td>‚úÖ Per-request + database</td>
<td><strong>LiteLLM</strong></td>
</tr>
<tr>
<td><strong>Budget Controls</strong></td>
<td>Basic limits</td>
<td>‚úÖ Per-key/user/team</td>
<td><strong>LiteLLM</strong></td>
</tr>
<tr>
<td><strong>Failover/Routing</strong></td>
<td>Automatic</td>
<td>‚úÖ Configurable strategies</td>
<td><strong>LiteLLM</strong></td>
</tr>
<tr>
<td><strong>Rate Limiting</strong></td>
<td>Basic</td>
<td>‚úÖ Granular (RPM/TPM)</td>
<td><strong>LiteLLM</strong></td>
</tr>
<tr>
<td><strong>Guardrails</strong></td>
<td>‚ùå None</td>
<td>‚úÖ Presidio, Lakera, etc.</td>
<td><strong>LiteLLM</strong></td>
</tr>
<tr>
<td><strong>Data Residency</strong></td>
<td>‚ö†Ô∏è US-based servers</td>
<td>‚úÖ Your infrastructure</td>
<td><strong>LiteLLM</strong></td>
</tr>
<tr>
<td><strong>Compliance Ready</strong></td>
<td>‚ö†Ô∏è Third-party handling</td>
<td>‚úÖ No data leaves infra</td>
<td><strong>LiteLLM</strong></td>
</tr>
<tr>
<td><strong>Pricing</strong></td>
<td>Pass-through + margin</td>
<td>Free (open source)</td>
<td><strong>LiteLLM</strong></td>
</tr>
<tr>
<td><strong>Infrastructure Overhead</strong></td>
<td>‚úÖ Zero</td>
<td>Requires deployment</td>
<td><strong>OpenRouter</strong></td>
</tr>
<tr>
<td><strong>New Model Availability</strong></td>
<td>‚úÖ Instant</td>
<td>Manual config update</td>
<td><strong>OpenRouter</strong></td>
</tr>
</tbody>
</table>
<h4 id="when-to-choose-each">When to Choose Each<a class="headerlink" href="#when-to-choose-each" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Scenario</th>
<th>Recommendation</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Rapid prototyping / POC</strong></td>
<td>OpenRouter ‚Äî zero setup</td>
</tr>
<tr>
<td><strong>Non-sensitive data workloads</strong></td>
<td>OpenRouter ‚Äî simpler</td>
</tr>
<tr>
<td><strong>Regulatory compliance (healthcare, education)</strong></td>
<td><strong>LiteLLM</strong> ‚Äî data residency, no third-party exposure</td>
</tr>
<tr>
<td><strong>Enterprise governance requirements</strong></td>
<td><strong>LiteLLM</strong> ‚Äî budget controls, guardrails</td>
</tr>
<tr>
<td><strong>Multi-tenant SaaS with billing</strong></td>
<td><strong>LiteLLM</strong> ‚Äî per-team cost tracking</td>
</tr>
<tr>
<td><strong>Cost optimization at scale</strong></td>
<td><strong>LiteLLM</strong> ‚Äî no margin, routing strategies</td>
</tr>
</tbody>
</table>
<h4 id="verdict">Verdict<a class="headerlink" href="#verdict" title="Permanent link">&para;</a></h4>
<p><strong>LiteLLM</strong> is the recommended choice because:
1. <strong>Data residency</strong> ‚Äî Critical for compliance needs
2. <strong>Built-in governance</strong> ‚Äî Cost tracking, budgets, guardrails reduce custom implementation
3. <strong>No cost margin</strong> ‚Äî Direct provider pricing at scale
4. <strong>Extensibility</strong> ‚Äî Custom guardrails for PHI, domain-specific compliance</p>
<hr />
<h2 id="detailed-litellm-evaluation">Detailed LiteLLM Evaluation<a class="headerlink" href="#detailed-litellm-evaluation" title="Permanent link">&para;</a></h2>
<h3 id="provider-support-matrix">Provider Support Matrix<a class="headerlink" href="#provider-support-matrix" title="Permanent link">&para;</a></h3>
<p>LiteLLM supports <strong>100+ providers</strong> via a unified OpenAI-compatible API. Feature support for key providers:</p>
<table>
<thead>
<tr>
<th>Provider</th>
<th>Model Prefix</th>
<th>Key Models</th>
<th>Vision</th>
<th>Tools</th>
<th>Streaming</th>
<th>Embeddings</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Azure OpenAI</strong></td>
<td><code>azure/&lt;deployment&gt;</code></td>
<td>GPT-4o, GPT-4, GPT-3.5</td>
<td>‚úÖ</td>
<td>‚úÖ</td>
<td>‚úÖ</td>
<td>‚úÖ</td>
</tr>
<tr>
<td><strong>OpenAI</strong></td>
<td><code>openai/</code></td>
<td>GPT-4o, o1, o3-mini</td>
<td>‚úÖ</td>
<td>‚úÖ</td>
<td>‚úÖ</td>
<td>‚úÖ</td>
</tr>
<tr>
<td><strong>Anthropic</strong></td>
<td><code>anthropic/</code></td>
<td>Claude 3.5 Sonnet, Opus, Haiku</td>
<td>‚úÖ</td>
<td>‚úÖ</td>
<td>‚úÖ</td>
<td>‚ùå</td>
</tr>
<tr>
<td><strong>Google Gemini</strong></td>
<td><code>gemini/</code></td>
<td>Gemini 1.5 Pro/Flash, 2.0</td>
<td>‚úÖ</td>
<td>‚úÖ</td>
<td>‚úÖ</td>
<td>‚úÖ</td>
</tr>
<tr>
<td><strong>xAI</strong></td>
<td><code>xai/</code></td>
<td>Grok-2, Grok-beta</td>
<td>‚úÖ</td>
<td>‚úÖ</td>
<td>‚úÖ</td>
<td>‚ùå</td>
</tr>
<tr>
<td><strong>Meta Llama</strong></td>
<td><code>together_ai/</code></td>
<td>Llama 3.1, 3.2 (via hosts)</td>
<td>‚úÖ</td>
<td>‚úÖ</td>
<td>‚úÖ</td>
<td>‚ùå</td>
</tr>
<tr>
<td><strong>Mistral</strong></td>
<td><code>mistral/</code></td>
<td>Large, Medium, Codestral</td>
<td>‚úÖ</td>
<td>‚úÖ</td>
<td>‚úÖ</td>
<td>‚úÖ</td>
</tr>
<tr>
<td><strong>AWS Bedrock</strong></td>
<td><code>bedrock/</code></td>
<td>Claude, Titan, Llama</td>
<td>‚úÖ</td>
<td>‚úÖ</td>
<td>‚úÖ</td>
<td>‚úÖ</td>
</tr>
<tr>
<td><strong>Cohere</strong></td>
<td><code>cohere/</code></td>
<td>Command R, R+</td>
<td>‚ùå</td>
<td>‚úÖ</td>
<td>‚úÖ</td>
<td>‚úÖ</td>
</tr>
<tr>
<td><strong>Groq</strong></td>
<td><code>groq/</code></td>
<td>Llama, Mixtral (fast)</td>
<td>‚ùå</td>
<td>‚úÖ</td>
<td>‚úÖ</td>
<td>‚ùå</td>
</tr>
</tbody>
</table>
<blockquote>
<p>üìù <strong>Note</strong>: Llama models require a hosting provider (Together AI, Groq, AWS Bedrock, or self-hosted via Ollama).</p>
</blockquote>
<p><strong>Usage</strong>: <code>response = completion(model="&lt;prefix&gt;/&lt;model&gt;", messages=[...])</code></p>
<hr />
<h3 id="built-in-governance-features">Built-in Governance Features<a class="headerlink" href="#built-in-governance-features" title="Permanent link">&para;</a></h3>
<p>LiteLLM provides <strong>native governance capabilities</strong> that align directly with our Agentic Governance &amp; Safety Framework:</p>
<h4 id="1-cost-tracking-budget-management">1. Cost Tracking &amp; Budget Management ‚úÖ<a class="headerlink" href="#1-cost-tracking-budget-management" title="Permanent link">&para;</a></h4>
<p><strong>Per-Request Cost Calculation</strong>:
<div class="highlight"><pre><span></span><code><span class="n">response</span> <span class="o">=</span> <span class="n">completion</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o&quot;</span><span class="p">,</span> <span class="n">messages</span><span class="o">=</span><span class="n">messages</span><span class="p">)</span>

<span class="c1"># Automatic cost calculation</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">_hidden_params</span><span class="p">[</span><span class="s2">&quot;response_cost&quot;</span><span class="p">])</span>  <span class="c1"># e.g., 0.0035</span>
</code></pre></div></p>
<p><strong>Budget Enforcement</strong>:
<div class="highlight"><pre><span></span><code><span class="c1"># config.yaml</span>
<span class="nt">general_settings</span><span class="p">:</span>
<span class="w">  </span><span class="nt">master_key</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sk-xxx&quot;</span>
<span class="w">  </span><span class="nt">database_url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;postgresql://...&quot;</span>

<span class="nt">litellm_settings</span><span class="p">:</span>
<span class="w">  </span><span class="nt">max_budget</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1000</span><span class="w">  </span><span class="c1"># Monthly budget in USD</span>
<span class="w">  </span><span class="nt">budget_duration</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;monthly&quot;</span>

<span class="nt">model_list</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">model_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gpt-4o</span>
<span class="w">    </span><span class="nt">litellm_params</span><span class="p">:</span>
<span class="w">      </span><span class="nt">model</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">azure/gpt-4o-deployment</span>
<span class="w">      </span><span class="nt">api_key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">os.environ/AZURE_API_KEY</span>
<span class="w">    </span><span class="nt">model_info</span><span class="p">:</span>
<span class="w">      </span><span class="nt">max_budget</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span><span class="w">  </span><span class="c1"># Per-model budget</span>
</code></pre></div></p>
<p><strong>Per-User/Per-Team Budgets</strong> (via Virtual Keys):
<div class="highlight"><pre><span></span><code><span class="c1"># Create user with budget</span>
curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span><span class="s1">&#39;http://proxy:4000/user/new&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s1">&#39;Authorization: Bearer sk-master-key&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">    &quot;user_id&quot;: &quot;user-123&quot;,</span>
<span class="s1">    &quot;max_budget&quot;: 50,</span>
<span class="s1">    &quot;budget_duration&quot;: &quot;daily&quot;</span>
<span class="s1">  }&#39;</span>
</code></pre></div></p>
<p><strong>Governance Framework Alignment</strong>: Maps directly to our <code>CostEngine</code> requirements. For how Governance extends these capabilities with alert thresholds and compliance reporting, see <a href="../agentic-governance-safety-framework/#2-cost-engine">Governance Cost Engine</a>.</p>
<hr />
<h4 id="2-guardrails-content-safety">2. Guardrails &amp; Content Safety ‚úÖ<a class="headerlink" href="#2-guardrails-content-safety" title="Permanent link">&para;</a></h4>
<p><strong>Native Guardrail Integration</strong>:
<div class="highlight"><pre><span></span><code><span class="c1"># config.yaml</span>
<span class="nt">litellm_settings</span><span class="p">:</span>
<span class="w">  </span><span class="nt">guardrails</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">guardrail_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;aporia-guard&quot;</span>
<span class="w">      </span><span class="nt">litellm_params</span><span class="p">:</span>
<span class="w">        </span><span class="nt">guardrail</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">aporia</span>
<span class="w">        </span><span class="nt">api_key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">os.environ/APORIA_API_KEY</span>
<span class="w">        </span><span class="nt">api_base</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://api.aporia.com&quot;</span>

<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">guardrail_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;lakera-pii-guard&quot;</span><span class="w">  </span>
<span class="w">      </span><span class="nt">litellm_params</span><span class="p">:</span>
<span class="w">        </span><span class="nt">guardrail</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">lakera</span>
<span class="w">        </span><span class="nt">api_key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">os.environ/LAKERA_API_KEY</span>
</code></pre></div></p>
<p><strong>Supported Guardrail Providers</strong>:
| Provider | Capabilities |
|----------|--------------|
| <strong>Aporia</strong> | PII detection, prompt injection, topic filtering |
| <strong>Lakera</strong> | Prompt injection, jailbreak detection, PII |
| <strong>Bedrock Guardrails</strong> | AWS-native content filtering |
| <strong>Azure AI Content Safety</strong> | Microsoft content moderation |
| <strong>Presidio</strong> | Open-source PII detection |
| <strong>LlamaGuard</strong> | Meta's safety classifier |
| <strong>Google Text Moderation</strong> | Harmful content detection |
| <strong>OpenAI Moderation</strong> | Built-in moderation endpoint |</p>
<p><strong>Custom Guardrails</strong>:
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">litellm.proxy.guardrails.guardrail_hooks</span><span class="w"> </span><span class="kn">import</span> <span class="n">GuardrailItem</span>

<span class="k">class</span><span class="w"> </span><span class="nc">CustomPHIGuard</span><span class="p">(</span><span class="n">GuardrailItem</span><span class="p">):</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">async_pre_call_hook</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">user_api_key_dict</span><span class="p">,</span> <span class="n">call_type</span><span class="p">):</span>
        <span class="c1"># Implement PHI detection logic</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">contains_phi</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;messages&quot;</span><span class="p">]):</span>
            <span class="k">raise</span> <span class="n">GuardrailException</span><span class="p">(</span><span class="s2">&quot;PHI detected in request&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">data</span>
</code></pre></div></p>
<p><strong>Governance Framework Alignment</strong>: Maps to our <code>SafetyEngine</code> and Guard Layer requirements. For how Governance extends these capabilities with domain-specific PII detection (PHI, education records) and reversible anonymization, see <a href="../agentic-governance-safety-framework/#3-safety-engine">Governance Safety Engine</a>.</p>
<hr />
<h4 id="3-authentication-access-control">3. Authentication &amp; Access Control ‚úÖ<a class="headerlink" href="#3-authentication-access-control" title="Permanent link">&para;</a></h4>
<p><strong>Virtual Keys (API Key Management)</strong>:
<div class="highlight"><pre><span></span><code><span class="c1"># Generate scoped API key</span>
curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span><span class="s1">&#39;http://proxy:4000/key/generate&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s1">&#39;Authorization: Bearer sk-master-key&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">    &quot;duration&quot;: &quot;30d&quot;,</span>
<span class="s1">    &quot;models&quot;: [&quot;gpt-4o&quot;, &quot;claude-sonnet-4-20250514&quot;],</span>
<span class="s1">    &quot;max_budget&quot;: 100,</span>
<span class="s1">    &quot;metadata&quot;: {&quot;team&quot;: &quot;byoeb&quot;, &quot;environment&quot;: &quot;production&quot;}</span>
<span class="s1">  }&#39;</span>
</code></pre></div></p>
<p><strong>JWT Authentication</strong>:
<div class="highlight"><pre><span></span><code><span class="nt">general_settings</span><span class="p">:</span>
<span class="w">  </span><span class="nt">master_key</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sk-xxx&quot;</span>
<span class="w">  </span><span class="nt">litellm_jwtauth</span><span class="p">:</span>
<span class="w">    </span><span class="nt">user_id_jwt_field</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sub&quot;</span>
<span class="w">    </span><span class="nt">team_id_jwt_field</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;org_id&quot;</span>
<span class="w">    </span><span class="nt">user_email_jwt_field</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;email&quot;</span>
</code></pre></div></p>
<p><strong>SSO Integration</strong> (Enterprise):
- OIDC/OAuth2 support
- Azure AD, Google Workspace, Okta
- SAML for enterprise SSO</p>
<p><strong>Governance Framework Alignment</strong>: Supports our multi-tenant authentication requirements.</p>
<hr />
<h4 id="4-audit-logging-observability">4. Audit Logging &amp; Observability ‚úÖ<a class="headerlink" href="#4-audit-logging-observability" title="Permanent link">&para;</a></h4>
<p><strong>Comprehensive Logging</strong>:
<div class="highlight"><pre><span></span><code><span class="nt">litellm_settings</span><span class="p">:</span>
<span class="w">  </span><span class="nt">callbacks</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;langfuse&quot;</span><span class="w">        </span><span class="c1"># LLM observability platform</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;lunary&quot;</span><span class="w">          </span><span class="c1"># Open-source LLM monitoring  </span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;logfire&quot;</span><span class="w">         </span><span class="c1"># Pydantic&#39;s observability</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;prometheus&quot;</span><span class="w">      </span><span class="c1"># Metrics export</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;otel&quot;</span><span class="w">            </span><span class="c1"># OpenTelemetry</span>
</code></pre></div></p>
<p><strong>Database Logging</strong> (Spend tracking):
<div class="highlight"><pre><span></span><code><span class="nt">general_settings</span><span class="p">:</span>
<span class="w">  </span><span class="nt">database_url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;postgresql://user:pass@host:5432/litellm&quot;</span>
<span class="w">  </span><span class="nt">store_model_in_db</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div></p>
<p><strong>Logged Data</strong>:
- Request/response metadata
- Token counts (input, output, cached)
- Cost per request
- Latency metrics
- User/team attribution
- Model used
- Error details</p>
<blockquote>
<p>üìñ <strong>Governance Access</strong>: For how Governance accesses this data and extends it with compliance-specific audit trails, see <a href="../agentic-governance-safety-framework/#what-the-gateway-already-stores">Governance Database Architecture</a>.</p>
</blockquote>
<p><strong>Governance Framework Alignment</strong>: Maps directly to our <code>AuditEngine</code> requirements. For how Governance extends these capabilities with compliance-specific audit trails, consent events, and regulatory reporting, see <a href="../agentic-governance-safety-framework/#4-audit-engine">Governance Audit Engine</a>.</p>
<hr />
<h4 id="5-fallback-reliability">5. Fallback &amp; Reliability ‚úÖ<a class="headerlink" href="#5-fallback-reliability" title="Permanent link">&para;</a></h4>
<p><strong>Automatic Failover</strong>:
<div class="highlight"><pre><span></span><code><span class="nt">model_list</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">model_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gpt-4o</span>
<span class="w">    </span><span class="nt">litellm_params</span><span class="p">:</span>
<span class="w">      </span><span class="nt">model</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">azure/gpt-4o-eastus</span>
<span class="w">      </span><span class="nt">api_base</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://eastus.openai.azure.com&quot;</span>
<span class="w">    </span><span class="nt">model_info</span><span class="p">:</span>
<span class="w">      </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;azure-eastus-primary&quot;</span>

<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">model_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gpt-4o</span>
<span class="w">    </span><span class="nt">litellm_params</span><span class="p">:</span>
<span class="w">      </span><span class="nt">model</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">azure/gpt-4o-westus</span>
<span class="w">      </span><span class="nt">api_base</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://westus.openai.azure.com&quot;</span>
<span class="w">    </span><span class="nt">model_info</span><span class="p">:</span>
<span class="w">      </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;azure-westus-fallback&quot;</span>

<span class="nt">router_settings</span><span class="p">:</span>
<span class="w">  </span><span class="nt">routing_strategy</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;latency-based-routing&quot;</span>
<span class="w">  </span><span class="nt">fallbacks</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[{</span><span class="s">&quot;gpt-4o&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;claude-sonnet-4-20250514&quot;</span><span class="p p-Indicator">]}]</span>
<span class="w">  </span><span class="nt">allowed_fails</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">  </span><span class="nt">cooldown_time</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">60</span>
</code></pre></div></p>
<p><strong>Routing Strategies</strong>:
- <code>simple-shuffle</code>: Random distribution
- <code>least-busy</code>: Route to model with lowest active requests
- <code>latency-based-routing</code>: Route to fastest responding model
- <code>cost-based-routing</code>: Route to cheapest available model</p>
<p><strong>Governance Framework Alignment</strong>: Provides resilience for mission-critical healthcare/education applications.</p>
<hr />
<h4 id="6-rate-limiting">6. Rate Limiting ‚úÖ<a class="headerlink" href="#6-rate-limiting" title="Permanent link">&para;</a></h4>
<p><strong>Per-Key Rate Limits</strong>:
<div class="highlight"><pre><span></span><code><span class="nt">litellm_settings</span><span class="p">:</span>
<span class="w">  </span><span class="nt">default_team_settings</span><span class="p">:</span>
<span class="w">    </span><span class="nt">rpm_limit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span><span class="w">      </span><span class="c1"># Requests per minute</span>
<span class="w">    </span><span class="nt">tpm_limit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100000</span><span class="w">   </span><span class="c1"># Tokens per minute</span>
</code></pre></div></p>
<p><strong>Per-Model Rate Limits</strong>:
<div class="highlight"><pre><span></span><code><span class="nt">model_list</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">model_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gpt-4o</span>
<span class="w">    </span><span class="nt">litellm_params</span><span class="p">:</span>
<span class="w">      </span><span class="nt">model</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">azure/gpt-4o</span>
<span class="w">    </span><span class="nt">model_info</span><span class="p">:</span>
<span class="w">      </span><span class="nt">rpm_limit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">50</span>
<span class="w">      </span><span class="nt">tpm_limit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">50000</span>
</code></pre></div></p>
<p><strong>Governance Framework Alignment</strong>: Maps to our <code>RateLimitGuard</code> requirements.</p>
<hr />
<h3 id="enterprise-features-optional">Enterprise Features (Optional)<a class="headerlink" href="#enterprise-features-optional" title="Permanent link">&para;</a></h3>
<p>For organizations requiring additional governance, LiteLLM Enterprise provides:</p>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>SSO for Admin UI</strong></td>
<td>OIDC/SAML authentication</td>
</tr>
<tr>
<td><strong>IP Access Control</strong></td>
<td>Whitelist/blacklist IP ranges</td>
</tr>
<tr>
<td><strong>PII Masking</strong></td>
<td>Automatic PII redaction in logs</td>
</tr>
<tr>
<td><strong>Custom Branding</strong></td>
<td>White-label admin interface</td>
</tr>
<tr>
<td><strong>Priority Support</strong></td>
<td>Dedicated support channel</td>
</tr>
<tr>
<td><strong>SLA Guarantees</strong></td>
<td>Uptime and response time SLAs</td>
</tr>
</tbody>
</table>
<p><em>Note: Open source version covers all core governance requirements.</em></p>
<hr />
<h2 id="recommended-architecture">Recommended Architecture<a class="headerlink" href="#recommended-architecture" title="Permanent link">&para;</a></h2>
<h3 id="integration-with-agentic-governance-safety-framework">Integration with Agentic Governance &amp; Safety Framework<a class="headerlink" href="#integration-with-agentic-governance-safety-framework" title="Permanent link">&para;</a></h3>
<blockquote>
<p>üìñ <strong>Governance Layer Details</strong>: For Governance-specific architecture and how it wraps the Gateway, see <a href="../agentic-governance-safety-framework/#how-this-hooks-back-into-the-agentic-layer">Governance Framework Architecture</a>.</p>
</blockquote>
<h3 id="deployment-architecture">Deployment Architecture<a class="headerlink" href="#deployment-architecture" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># docker-compose.yml for LiteLLM Gateway</span>
<span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3.9&quot;</span>

<span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">litellm-proxy</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ghcr.io/berriai/litellm:main-latest</span>
<span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;4000:4000&quot;</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DATABASE_URL=postgresql://litellm:password@postgres:5432/litellm</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LITELLM_MASTER_KEY=${LITELLM_MASTER_KEY}</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AZURE_API_KEY=${AZURE_API_KEY}</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AZURE_API_BASE=${AZURE_API_BASE}</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">GOOGLE_API_KEY=${GOOGLE_API_KEY}</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./config.yaml:/app/config.yaml</span>
<span class="w">    </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;--config&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;/app/config.yaml&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;--detailed_debug&quot;</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">depends_on</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">redis</span>

<span class="w">  </span><span class="nt">postgres</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres:15</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">POSTGRES_USER=litellm</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">POSTGRES_PASSWORD=password</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">POSTGRES_DB=litellm</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres_data:/var/lib/postgresql/data</span>

<span class="w">  </span><span class="nt">redis</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">redis:7-alpine</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">redis_data:/data</span>

<span class="nt">volumes</span><span class="p">:</span>
<span class="w">  </span><span class="nt">postgres_data</span><span class="p">:</span>
<span class="w">  </span><span class="nt">redis_data</span><span class="p">:</span>
</code></pre></div>
<h3 id="configuration-for-multi-tenant-governance">Configuration for Multi-Tenant Governance<a class="headerlink" href="#configuration-for-multi-tenant-governance" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># litellm_config.yaml</span>
<span class="nt">model_list</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># Azure OpenAI - Primary for BYOEB (Healthcare)</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">model_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gpt-4o</span>
<span class="w">    </span><span class="nt">litellm_params</span><span class="p">:</span>
<span class="w">      </span><span class="nt">model</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">azure/gpt-4o-deployment</span>
<span class="w">      </span><span class="nt">api_base</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">os.environ/AZURE_API_BASE</span>
<span class="w">      </span><span class="nt">api_key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">os.environ/AZURE_API_KEY</span>
<span class="w">      </span><span class="nt">api_version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2024-02-15-preview&quot;</span>
<span class="w">    </span><span class="nt">model_info</span><span class="p">:</span>
<span class="w">      </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;azure-gpt4o-primary&quot;</span>
<span class="w">      </span><span class="nt">max_budget</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">500</span>
<span class="w">      </span><span class="nt">rpm_limit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
<span class="w">      </span><span class="nt">tpm_limit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100000</span>

<span class="w">  </span><span class="c1"># Azure OpenAI - Fallback</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">model_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gpt-4o</span>
<span class="w">    </span><span class="nt">litellm_params</span><span class="p">:</span>
<span class="w">      </span><span class="nt">model</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">azure/gpt-4o-westus</span>
<span class="w">      </span><span class="nt">api_base</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">os.environ/AZURE_WESTUS_API_BASE</span>
<span class="w">      </span><span class="nt">api_key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">os.environ/AZURE_WESTUS_API_KEY</span>
<span class="w">    </span><span class="nt">model_info</span><span class="p">:</span>
<span class="w">      </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;azure-gpt4o-fallback&quot;</span>

<span class="w">  </span><span class="c1"># Anthropic Claude - Alternative for reasoning tasks</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">model_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">claude-sonnet</span>
<span class="w">    </span><span class="nt">litellm_params</span><span class="p">:</span>
<span class="w">      </span><span class="nt">model</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">claude-sonnet-4-20250514</span>
<span class="w">      </span><span class="nt">api_key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">os.environ/ANTHROPIC_API_KEY</span>
<span class="w">    </span><span class="nt">model_info</span><span class="p">:</span>
<span class="w">      </span><span class="nt">max_budget</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">200</span>

<span class="w">  </span><span class="c1"># Google Gemini - Cost-effective option</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">model_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gemini-flash</span>
<span class="w">    </span><span class="nt">litellm_params</span><span class="p">:</span>
<span class="w">      </span><span class="nt">model</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gemini/gemini-2.0-flash</span>
<span class="w">      </span><span class="nt">api_key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">os.environ/GOOGLE_API_KEY</span>
<span class="w">    </span><span class="nt">model_info</span><span class="p">:</span>
<span class="w">      </span><span class="nt">max_budget</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>

<span class="w">  </span><span class="c1"># Embeddings - Azure</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">model_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">text-embedding-3-large</span>
<span class="w">    </span><span class="nt">litellm_params</span><span class="p">:</span>
<span class="w">      </span><span class="nt">model</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">azure/text-embedding-3-large</span>
<span class="w">      </span><span class="nt">api_base</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">os.environ/AZURE_API_BASE</span>
<span class="w">      </span><span class="nt">api_key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">os.environ/AZURE_API_KEY</span>

<span class="nt">general_settings</span><span class="p">:</span>
<span class="w">  </span><span class="nt">master_key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">os.environ/LITELLM_MASTER_KEY</span>
<span class="w">  </span><span class="nt">database_url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">os.environ/DATABASE_URL</span>
<span class="w">  </span><span class="nt">store_model_in_db</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>

<span class="nt">router_settings</span><span class="p">:</span>
<span class="w">  </span><span class="nt">routing_strategy</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;latency-based-routing&quot;</span>
<span class="w">  </span><span class="nt">fallbacks</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[{</span><span class="s">&quot;gpt-4o&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;claude-sonnet&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;gemini-flash&quot;</span><span class="p p-Indicator">]}]</span>
<span class="w">  </span><span class="nt">allowed_fails</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">  </span><span class="nt">cooldown_time</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">60</span>
<span class="w">  </span><span class="nt">retry_after</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">15</span>

<span class="nt">litellm_settings</span><span class="p">:</span>
<span class="w">  </span><span class="nt">drop_params</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">max_budget</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2000</span>
<span class="w">  </span><span class="nt">budget_duration</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;monthly&quot;</span>

<span class="w">  </span><span class="c1"># Guardrails integration</span>
<span class="w">  </span><span class="nt">guardrails</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">guardrail_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;presidio-pii&quot;</span>
<span class="w">      </span><span class="nt">litellm_params</span><span class="p">:</span>
<span class="w">        </span><span class="nt">guardrail</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">presidio</span>

<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">guardrail_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;openai-moderation&quot;</span>
<span class="w">      </span><span class="nt">litellm_params</span><span class="p">:</span>
<span class="w">        </span><span class="nt">guardrail</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">openai_moderation</span>

<span class="w">  </span><span class="c1"># Callbacks for observability</span>
<span class="w">  </span><span class="nt">callbacks</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;langfuse&quot;</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;prometheus&quot;</span>

<span class="w">  </span><span class="nt">success_callback</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;langfuse&quot;</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">failure_callback</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;langfuse&quot;</span><span class="p p-Indicator">]</span>
</code></pre></div>
<hr />
<h2 id="integration-with-governance-framework">Integration with Governance Framework<a class="headerlink" href="#integration-with-governance-framework" title="Permanent link">&para;</a></h2>
<p>The LLM Gateway Layer integrates with the <a href="../agentic-governance-safety-framework/">Agentic Governance &amp; Safety Framework</a> as the foundational infrastructure layer. The governance framework's engines interact with the Gateway as follows:</p>
<table>
<thead>
<tr>
<th>Governance Engine</th>
<th>Gateway Interaction</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Cost Engine</strong></td>
<td>Queries <code>LiteLLM_TeamTable</code> for spend status; adds warning alerts before Gateway's hard budget block</td>
</tr>
<tr>
<td><strong>Safety Engine</strong></td>
<td>Adds domain-specific PII detection (PHI, education) on top of Gateway's generic Presidio/Lakera guardrails</td>
</tr>
<tr>
<td><strong>Audit Engine</strong></td>
<td>Logs governance-specific events (consent, guard decisions); links to Gateway logs via <code>gateway_request_id</code></td>
</tr>
</tbody>
</table>
<blockquote>
<p>üìñ <strong>Detailed Integration</strong>: 
- <strong>Responsibility Boundaries</strong>: See <a href="../agentic-governance-safety-framework/#what-the-gateway-provides-vs-what-governance-adds">What Gateway Provides vs What Governance Adds</a> for complete capability matrix
- <strong>Engine Interfaces</strong>: See <a href="../agentic-governance-safety-framework/#engine-layer">Engine Layer section</a> for complete interface definitions, proactive/reactive behavior, and implementation patterns
- <strong>Integration Principles</strong>: Governance <strong>queries</strong> the Gateway‚Äîit does NOT duplicate storage. All cost/usage data lives in LiteLLM's database tables.</p>
</blockquote>
<hr />
<h2 id="migration-strategy">Migration Strategy<a class="headerlink" href="#migration-strategy" title="Permanent link">&para;</a></h2>
<h3 id="phase-1-infrastructure-setup">Phase 1: Infrastructure Setup<a class="headerlink" href="#phase-1-infrastructure-setup" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Deploy LiteLLM Proxy</strong> in staging environment</li>
<li><strong>Configure existing Azure OpenAI</strong> credentials</li>
<li><strong>Set up PostgreSQL</strong> for spend tracking</li>
<li><strong>Create tenant-specific virtual keys</strong></li>
</ol>
<h3 id="phase-2-byoeb-migration">Phase 2: BYOEB Migration<a class="headerlink" href="#phase-2-byoeb-migration" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Update LLM client</strong> to point to LiteLLM proxy</li>
<li><strong>Map existing Azure OpenAI calls</strong> through gateway</li>
<li><strong>Enable cost tracking</strong> and validate accuracy</li>
<li><strong>Add Presidio guardrail</strong> for PII detection</li>
<li><strong>Monitor and tune</strong> fallback behavior</li>
</ol>
<h3 id="phase-3-shiksha-copilot-migration">Phase 3: Shiksha Copilot Migration<a class="headerlink" href="#phase-3-shiksha-copilot-migration" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Migrate Azure OpenAI calls</strong> through gateway</li>
<li><strong>Configure education-specific guardrails</strong></li>
<li><strong>Enable Claude fallback</strong> for reasoning tasks</li>
<li><strong>Integrate with existing token tracking</strong></li>
</ol>
<h3 id="phase-4-advanced-features">Phase 4: Advanced Features<a class="headerlink" href="#phase-4-advanced-features" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Add custom PHI guardrail</strong> for healthcare</li>
<li><strong>Implement cross-model routing</strong> based on task type</li>
<li><strong>Set up Langfuse/Prometheus</strong> observability</li>
<li><strong>Create governance dashboards</strong></li>
</ol>
<hr />
<h2 id="benefits-summary">Benefits Summary<a class="headerlink" href="#benefits-summary" title="Permanent link">&para;</a></h2>
<h3 id="immediate-benefits">Immediate Benefits<a class="headerlink" href="#immediate-benefits" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Benefit</th>
<th>Impact</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Provider Flexibility</strong></td>
<td>Switch/add providers without code changes</td>
</tr>
<tr>
<td><strong>Cost Visibility</strong></td>
<td>Real-time spend tracking per tenant/user</td>
</tr>
<tr>
<td><strong>Automatic Fallover</strong></td>
<td>99.9% availability through provider redundancy</td>
</tr>
<tr>
<td><strong>Unified API</strong></td>
<td>Single SDK pattern across all products</td>
</tr>
<tr>
<td><strong>Built-in Safety</strong></td>
<td>PII detection, content moderation out-of-box</td>
</tr>
</tbody>
</table>
<h3 id="long-term-strategic-benefits">Long-term Strategic Benefits<a class="headerlink" href="#long-term-strategic-benefits" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Benefit</th>
<th>Impact</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Cost Optimization</strong></td>
<td>Route to cheapest capable model</td>
</tr>
<tr>
<td><strong>Best-of-Breed Models</strong></td>
<td>Use Claude for reasoning, GPT for general, Gemini for multimodal</td>
</tr>
<tr>
<td><strong>Compliance Foundation</strong></td>
<td>Audit trail, data residency, governance policies</td>
</tr>
<tr>
<td><strong>Future-Proofing</strong></td>
<td>New models available immediately</td>
</tr>
<tr>
<td><strong>Reduced Lock-in</strong></td>
<td>Negotiate better rates with optionality</td>
</tr>
</tbody>
</table>
<p><strong>LiteLLM is the recommended LLM Gateway solution</strong> for the Agentic Governance &amp; Safety Framework because it:</p>
<ol>
<li>‚úÖ <strong>Supports all required providers</strong> (Azure OpenAI, Anthropic, Google, Meta, xAI, and 100+ more)</li>
<li>‚úÖ <strong>Provides native governance features</strong> (cost tracking, budgets, guardrails, audit logging)</li>
<li>‚úÖ <strong>Enables self-hosting</strong> for data residency and compliance (critical for healthcare/education domains)</li>
<li>‚úÖ <strong>Open source</strong> with optional enterprise features</li>
<li>‚úÖ <strong>Reduces implementation effort</strong> for our governance framework by providing foundational capabilities</li>
</ol>
<p>The LLM Gateway Layer should be implemented as the <strong>first foundational component</strong> of the governance framework, providing immediate value while enabling incremental addition of domain-specific governance logic.</p>
<hr />
<h2 id="references">References<a class="headerlink" href="#references" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://docs.litellm.ai/">LiteLLM Documentation</a></li>
<li><a href="https://github.com/BerriAI/litellm">LiteLLM GitHub Repository</a></li>
<li><a href="https://openrouter.ai/docs">OpenRouter Documentation</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/ai-services/openai/">Azure OpenAI Service</a></li>
<li><a href="https://microsoft.github.io/presidio/">Presidio PII Detection</a></li>
<li><a href="https://langfuse.com/">Langfuse LLM Observability</a></li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.expand", "navigation.sections", "toc.integrate"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>